20241201-j768

ì•¼
ChatGPTì˜ ë§:
ChatGPT
ì‘? ë¬´ìŠ¨ ì¼ì´ì•¼? ğŸ˜Š






ë‚˜ì˜ ë§:
public class ThreadEx21 {
    public static void main(String [] args){
        Runnable r = new RunnableEx21();
    }
}

class Account {
    private int balance = 1000;
    
    public int getBalance() {
        return balance;
    }
    
    public void withdraw(int money){
        if(balance >= money) {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e){
                
            }
            balance -= money;
        }
    }
}

class RunnableEx21 implements Runnable {
    Account acc = new Account();
    
    public void run() {
        while(acc.getBalance() > 0) {
            int money = (int)(Math.random() * 3 +1) * 100;
            acc.withdraw(money);
            System.out.println("balance : " + acc.getBalance());
        }
    }
}

í•´ì„í•´
ChatGPTì˜ ë§:
ChatGPT
ì½”ë“œ ì„¤ëª…
ìœ„ ì½”ë“œëŠ” ë‹¤ì¤‘ ì“°ë ˆë“œ í™˜ê²½ì—ì„œ **ê³„ì¢Œ(Account)**ì—ì„œ ëˆì„ ì¶œê¸ˆí•˜ë©° ì”ì•¡ì„ í™•ì¸í•˜ëŠ” í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤. ë‹¤ë§Œ, ì‘ì„±ëœ ì½”ë“œì—ëŠ” ë™ê¸°í™”ê°€ ì—†ê¸° ë•Œë¬¸ì—, ë‹¤ì¤‘ ì“°ë ˆë“œì—ì„œ ì‹¤í–‰ ì‹œ **ê²½ìŸ ìƒíƒœ(Race Condition)**ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì½”ë“œê°€ ë™ì‘í•˜ëŠ” ì£¼ìš” ë¶€ë¶„ì„ ë‹¨ê³„ë³„ë¡œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

1. Account í´ë˜ìŠ¤
AccountëŠ” ê³„ì¢Œë¥¼ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
balanceëŠ” ê³„ì¢Œì˜ ì”ì•¡(ì´ˆê¸°ê°’ 1000)ì´ë©°, getBalance ë©”ì„œë“œë¡œ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
withdraw(int money) ë©”ì„œë“œëŠ” ì¸ì¶œ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
balanceê°€ moneyë³´ë‹¤ í¬ê±°ë‚˜ ê°™ì„ ë•Œë§Œ ì¸ì¶œí•©ë‹ˆë‹¤.
1ì´ˆ ë™ì•ˆ ëŒ€ê¸°í•œ í›„ ì”ì•¡ì—ì„œ ì¶œê¸ˆ ê¸ˆì•¡ì„ ì°¨ê°í•©ë‹ˆë‹¤.
ë‹¤ì¤‘ ì“°ë ˆë“œ í™˜ê²½ì—ì„œ ë™ê¸°í™”(synchronization)ê°€ ì ìš©ë˜ì§€ ì•Šì•„ ë¬¸ì œ ë°œìƒ ê°€ëŠ¥.
2. RunnableEx21 í´ë˜ìŠ¤
RunnableEx21ì€ Runnableì„ êµ¬í˜„í•˜ì—¬ ì‹¤í–‰ ê°€ëŠ¥í•œ ì“°ë ˆë“œ ì‘ì—…ì„ ì •ì˜í•©ë‹ˆë‹¤.
Account ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ì‘ì—…ì— ì‚¬ìš©í•©ë‹ˆë‹¤.
run ë©”ì„œë“œ:
ê³„ì¢Œ ì”ì•¡ì´ 0ë³´ë‹¤ í´ ë•Œê¹Œì§€ ë¬´í•œ ë£¨í”„ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
ì¸ì¶œí•  ê¸ˆì•¡ì„ 100, 200, 300 ì¤‘ í•˜ë‚˜ë¡œ ë¬´ì‘ìœ„ë¡œ ê²°ì •í•©ë‹ˆë‹¤.
Accountì˜ withdraw ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ ì¶œê¸ˆí•˜ê³ , ì”ì•¡ì„ ì¶œë ¥í•©ë‹ˆë‹¤.
3. ThreadEx21 í´ë˜ìŠ¤
í”„ë¡œê·¸ë¨ì˜ ì‹œì‘ì ì¸ main ë©”ì„œë“œì…ë‹ˆë‹¤.
RunnableEx21 ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
í•˜ì§€ë§Œ Threadë¡œ ì‹¤í–‰í•˜ì§€ ì•Šê³ , ë‹¨ìˆœíˆ Runnable ê°ì²´ë§Œ ìƒì„±í–ˆìœ¼ë¯€ë¡œ ì“°ë ˆë“œëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ì˜ˆìƒ ë¬¸ì œì  ë° ë™ì‘
Thread ì‹¤í–‰ ëˆ„ë½
Runnable ê°ì²´ë¥¼ ìƒì„±í–ˆì§€ë§Œ, Threadì— ì „ë‹¬í•˜ì—¬ ì‹¤í–‰í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
â†’ ì“°ë ˆë“œ ì‹¤í–‰ ì½”ë“œë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤:

java
ì½”ë“œ ë³µì‚¬
Thread t = new Thread(r);
t.start();
ë™ê¸°í™” ë¬¸ì œ
ë‹¤ì¤‘ ì“°ë ˆë“œ í™˜ê²½ì—ì„œ ë™ì‘ ì‹œ withdraw ë©”ì„œë“œì— ë™ê¸°í™”ê°€ ì—†ì–´ ì”ì•¡ì´ ìŒìˆ˜ê°€ ë˜ê±°ë‚˜, ì¸ì¶œí•œ ê¸ˆì•¡ê³¼ ì”ì•¡ ì¶œë ¥ì´ ë¶ˆì¼ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
â†’ withdraw ë©”ì„œë“œì— synchronizedë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤:

java
ì½”ë“œ ë³µì‚¬
public synchronized void withdraw(int money) { ... }
ê°œì„ ëœ ì½”ë“œ ì˜ˆì‹œ
java
ì½”ë“œ ë³µì‚¬
public class ThreadEx21 {
    public static void main(String[] args) {
        Runnable r = new RunnableEx21();
        Thread t1 = new Thread(r);
        Thread t2 = new Thread(r); // ë‘ ì“°ë ˆë“œ ìƒì„±
        t1.start();
        t2.start();
    }
}

class Account {
    private int balance = 1000;

    public int getBalance() {
        return balance;
    }

    public synchronized void withdraw(int money) { // ë™ê¸°í™” ì¶”ê°€
        if (balance >= money) {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            balance -= money;
        }
    }
}

class RunnableEx21 implements Runnable {
    Account acc = new Account();

    public void run() {
        while (acc.getBalance() > 0) {
            int money = (int) (Math.random() * 3 + 1) * 100;
            acc.withdraw(money);
            System.out.println("ì”ì•¡ : " + acc.getBalance());
        }
    }
}
ì¶œë ¥ ê²°ê³¼ ì˜ˆì‹œ
ë™ê¸°í™”ë¥¼ ì ìš©í•œ í›„, ë‘ ì“°ë ˆë“œê°€ ê²½ìŸí•˜ë©° ë‹¤ìŒê³¼ ê°™ì€ ì¶œë ¥ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

ì½”ë“œ ë³µì‚¬
ì”ì•¡ : 900
ì”ì•¡ : 800
ì”ì•¡ : 700
ì”ì•¡ : 600
ì”ì•¡ : 500
ì”ì•¡ : 400
ì”ì•¡ : 300
ì”ì•¡ : 200
ì”ì•¡ : 100
ì”ì•¡ : 0





ë‚˜ì˜ ë§:
ê·¸ëŸ¬ë©´ 
public class ThreadEx22 {
    public static void main(String[] args){
        Runnable r = new RunnableEx22();
        new Thread(r).start();
        new Thread(r).start();
    }
}

class Account1 {
    private int balance = 1000;

    public int getBalance() {
        return balance;
    }

    public synchronized void withdraw(int money){
        if(balance >= money) {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e){

            }
            balance -= money;
        }
    }
}

class RunnableEx22 implements Runnable {
    Account1 acc = new Account1();

    public void run() {
        while(acc.getBalance() > 0) {
            int money = (int)(Math.random() * 3 +1) * 100;
            acc.withdraw(money);
            System.out.println("balance : " + acc.getBalance());
        }
    }
}
ì„ í•´ì„í•´
ChatGPTì˜ ë§:
ChatGPT
ì½”ë“œ ì„¤ëª…
ì´ ì½”ë“œëŠ” ì´ì „ ì½”ë“œ(ThreadEx21)ì—ì„œ ê°œì„ ëœ ë²„ì „ìœ¼ë¡œ, ë‹¤ìŒê³¼ ê°™ì€ ì£¼ìš” ë³€ê²½ ë° ì¶”ê°€ ì‚¬í•­ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

RunnableEx22ë¥¼ ì‹¤í–‰í•˜ëŠ” ë‘ ê°œì˜ ì“°ë ˆë“œë¥¼ ìƒì„±í•˜ì—¬ ë™ì‹œ ì‹¤í–‰í•©ë‹ˆë‹¤.
Account1 í´ë˜ìŠ¤ì˜ withdraw ë©”ì„œë“œì— synchronized í‚¤ì›Œë“œë¥¼ ì¶”ê°€í•˜ì—¬ ì“°ë ˆë“œ ì•ˆì „ì„±ì„ ë³´ì¥í•©ë‹ˆë‹¤.
ì”ì•¡(balance)ì´ 0ë³´ë‹¤ í´ ë•Œê¹Œì§€ ë°˜ë³µì ìœ¼ë¡œ ëœë¤ ê¸ˆì•¡ì„ ì¶œê¸ˆí•˜ë©° ì”ì•¡ì„ ì¶œë ¥í•©ë‹ˆë‹¤.
1. ThreadEx22 í´ë˜ìŠ¤
main ë©”ì„œë“œ: í”„ë¡œê·¸ë¨ì˜ ì§„ì…ì ì…ë‹ˆë‹¤.
RunnableEx22 ê°ì²´ë¥¼ ìƒì„±í•œ í›„, ë‘ ê°œì˜ Threadë¥¼ ìƒì„±í•˜ì—¬ ì‹¤í–‰í•©ë‹ˆë‹¤:
java
ì½”ë“œ ë³µì‚¬
new Thread(r).start(); // ì²« ë²ˆì§¸ ì“°ë ˆë“œ
new Thread(r).start(); // ë‘ ë²ˆì§¸ ì“°ë ˆë“œ
ë‘ ì“°ë ˆë“œëŠ” ë™ì¼í•œ RunnableEx22 ê°ì²´ë¥¼ ê³µìœ í•˜ë¯€ë¡œ ë™ì¼í•œ Account1 ê°ì²´ë¥¼ ë™ì‹œì— ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤.
2. Account1 í´ë˜ìŠ¤
ê³„ì¢Œ ì •ë³´ë¥¼ ê´€ë¦¬í•˜ëŠ” í´ë˜ìŠ¤ì…ë‹ˆë‹¤.
balance: ê³„ì¢Œ ì”ì•¡(ì´ˆê¸°ê°’ 1000).
withdraw ë©”ì„œë“œ:
ì¶œê¸ˆ ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ì”ì•¡ì´ ì¶©ë¶„í•œ ê²½ìš°ì—ë§Œ ì¶œê¸ˆ ìˆ˜í–‰.
ë©”ì„œë“œì— synchronizedë¥¼ ì¶”ê°€í•˜ì—¬ ë™ì‹œì— ì—¬ëŸ¬ ì“°ë ˆë“œê°€ ì ‘ê·¼í•˜ì§€ ëª»í•˜ë„ë¡ ë³´í˜¸.
1ì´ˆì˜ ì§€ì—°ì„ ì¶”ê°€í•˜ì—¬ ì“°ë ˆë“œ ê²½ìŸ ìƒí™©ì„ ì‹œë®¬ë ˆì´ì…˜.
3. RunnableEx22 í´ë˜ìŠ¤
Runnableì„ êµ¬í˜„í•˜ì—¬ ì“°ë ˆë“œ ì‹¤í–‰ ë¡œì§ì„ ì •ì˜í•©ë‹ˆë‹¤.
Account1 ê°ì²´ë¥¼ ë©¤ë²„ ë³€ìˆ˜ë¡œ ìƒì„±í•˜ë©°, ë‘ ì“°ë ˆë“œê°€ ì´ ê°ì²´ë¥¼ ê³µìœ í•©ë‹ˆë‹¤.
run ë©”ì„œë“œ:
ì”ì•¡ì´ 0ë³´ë‹¤ í° ë™ì•ˆ ë¬´í•œ ë£¨í”„ë¥¼ ì‹¤í–‰.
100, 200, 300 ì¤‘ ë¬´ì‘ìœ„ë¡œ ê¸ˆì•¡ì„ ì„ íƒí•˜ì—¬ ì¶œê¸ˆ.
ì¶œê¸ˆ í›„ ì”ì•¡ì„ ì¶œë ¥.
ì˜ˆìƒ ì¶œë ¥ ë° ë™ì‘
ë™ê¸°í™”ê°€ ì ìš©ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ë‘ ì“°ë ˆë“œê°€ ì„œë¡œ ë²ˆê°ˆì•„ ê°€ë©° ì•ˆì „í•˜ê²Œ ì¶œê¸ˆ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
ì“°ë ˆë“œê°€ ë™ì‹œì— withdraw ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì§€ ëª»í•˜ê¸° ë•Œë¬¸ì— ì”ì•¡ì´ ìŒìˆ˜ë¡œ ë‚´ë ¤ê°€ê±°ë‚˜ ì˜ëª»ëœ ì¶œë ¥ì´ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ì˜ˆìƒ ì¶œë ¥ ì˜ˆì‹œ:

yaml
ì½”ë“œ ë³µì‚¬
balance : 900
balance : 800
balance : 700
balance : 600
balance : 500
balance : 400
balance : 300
balance : 200
balance : 100
balance : 0
ë™ì‘ ì›ë¦¬
ë™ê¸°í™”(synchronized)ì˜ ì—­í• 
withdraw ë©”ì„œë“œì— synchronizedë¥¼ ì¶”ê°€í–ˆìœ¼ë¯€ë¡œ, í•œ ë²ˆì— í•˜ë‚˜ì˜ ì“°ë ˆë“œë§Œ withdraw ë©”ì„œë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ë¡œ ì¸í•´ ë‘ ì“°ë ˆë“œê°€ ë™ì‹œì— ì¶œê¸ˆì„ ì‹œë„í•´ë„, í•­ìƒ ì”ì•¡ í™•ì¸ â†’ ì¶œê¸ˆ ê³¼ì •ì´ ìˆœì°¨ì ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
ë‘ ì“°ë ˆë“œì˜ ì‘ì—… íë¦„
ì²« ë²ˆì§¸ ì“°ë ˆë“œê°€ withdraw ë©”ì„œë“œì— ì§„ì…í•˜ì—¬ ì”ì•¡ì„ í™•ì¸í•˜ê³  ì¶œê¸ˆ.
ì²« ë²ˆì§¸ ì“°ë ˆë“œê°€ ë©”ì„œë“œ ì‹¤í–‰ì„ ë§ˆì¹˜ë©´, ë‘ ë²ˆì§¸ ì“°ë ˆë“œê°€ ë©”ì„œë“œì— ì§„ì…í•˜ì—¬ ì¶œê¸ˆ.
ì´ ê³¼ì •ì´ ë°˜ë³µë˜ë©° ì”ì•¡ì´ 0ì´ ë  ë•Œê¹Œì§€ ì‹¤í–‰ë©ë‹ˆë‹¤.
ê°œì„  ì‚¬í•­
í˜„ì¬ ì½”ë“œë„ ì˜ ë™ì‘í•˜ì§€ë§Œ, **Thread.sleep**ìœ¼ë¡œ ì¸í•œ ì¸ìœ„ì ì¸ ì§€ì—°ì„ ì œê±°í•˜ê±°ë‚˜, ì“°ë ˆë“œ ë™ì‘ì„ ë”ìš± ëª…í™•íˆ í•˜ê¸° ìœ„í•´ ì“°ë ˆë“œ ì´ë¦„ì„ ì¶œë ¥ì— í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´:

java
ì½”ë“œ ë³µì‚¬
System.out.println(Thread.currentThread().getName() + " balance: " + acc.getBalance());
ì¶œë ¥ ì˜ˆì‹œ:

mathematica
ì½”ë“œ ë³µì‚¬
Thread-0 balance: 900
Thread-1 balance: 800
Thread-0 balance: 700
Thread-1 balance: 600
...





ë‚˜ì˜ ë§:
ì•¼
ChatGPTì˜ ë§:
ChatGPT
ì™œ? ë­ ê¶ê¸ˆí•œ ê±° ìˆì–´? ğŸ˜Š






ë‚˜ì˜ ë§:
import java.util.ArrayList;

public class ThreadWaitEx1 {
    public static void main(String[] args) throws Exception {
        Table table = new Table();
        
        new Thread(new Cook(table), "COOK1").start();
        new Thread(new Customer(table, "donut"), "CUST1").start();
        new Thread(new Customer(table, "burger"), "CUST2").start();
        
        Thread.sleep(100);
        System.exit(0);
    }
}

class Customer implements Runnable {
    private Table table;
    private String food;
    
    Customer(Table table, String food ){
        this.food = food;
        this.table = table;
    }
    
    public void run() {
        while(true){
            try {
                Thread.sleep(10);
                 
            } catch (InterruptedException e ){
                
            }
            
            String name = Thread.currentThread().getName();
            
            if(eatFood()) System.out.println(name + " ate a "+food);
            else System.out.println(name + " failed to eat. ");
        }
    }
    
    boolean eatFood() {
        return table.remove(food);
    }
}

class Cook implements Runnable {
    private Table table;
    
    Cook(Table table) {
        this.table = table;
    }
    
    public void run() {
        while(true){
            int idx = (int)(Math.random() * table.dishNum());
            table.add(table.dishNames[idx]);
            
            try {
                Thread.sleep(1);
            } catch (InterruptedException e) {
                
            }
        }
    }
}

class Table {
    String[] dishNames = {"donut","donut","burger"};
    final int MAX_FOOD = 6;
    
    private ArrayList<String> dishes = new ArrayList<>();
    
    public void add(String dish){
        if(dishes.size() >= MAX_FOOD) return;
        
        dishes.add(dish);
        System.out.println("Dishes: "+dishes.toString());
    }
    
    public boolean remove(String dishName) {
        for(int i = 0; i < dishes.size(); i++){
            if(dishName.equals(dishes.get(i))){
                dishes.remove(i);
                return true;
            }
        }
        
        return false;
    }
    
    public int dishNum() {
        return dishNames.length;
    }
}

í•´ì„í•´
ChatGPTì˜ ë§:
ChatGPT
ì½”ë“œ ê°œìš”
ì´ ì½”ë“œëŠ” ê°„ë‹¨í•œ ìƒì‚°ì-ì†Œë¹„ì ë¬¸ì œë¥¼ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤.

Cook(ìš”ë¦¬ì‚¬)ì€ ìš”ë¦¬ë¥¼ ë§Œë“¤ì–´ Tableì— ì˜¬ë¦½ë‹ˆë‹¤.
Customer(ì†ë‹˜)ëŠ” Tableì—ì„œ ìì‹ ì´ ì›í•˜ëŠ” ìš”ë¦¬ë¥¼ êº¼ë‚´ ë¨¹ìœ¼ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤.
ìš”ë¦¬ì‚¬ì™€ ì†ë‹˜ ê°„ì˜ ì‘ì—…ì´ ë¹„ë™ê¸°ì ìœ¼ë¡œ ìˆ˜í–‰ë©ë‹ˆë‹¤.
ì£¼ìš” í´ë˜ìŠ¤ ì„¤ëª…
1. ThreadWaitEx1 í´ë˜ìŠ¤
í”„ë¡œê·¸ë¨ì˜ ì§„ì…ì (main ë©”ì„œë“œ).
Table ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , ë‹¤ìŒê³¼ ê°™ì€ ì“°ë ˆë“œë“¤ì„ ì‹¤í–‰í•©ë‹ˆë‹¤:
Cook ì“°ë ˆë“œ: ìš”ë¦¬ë¥¼ ìƒì‚°í•©ë‹ˆë‹¤.
ë‘ ê°œì˜ Customer ì“°ë ˆë“œ: ê°ê¸° ë‹¤ë¥¸ ìŒì‹ì„ ì†Œë¹„í•˜ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤ (donut, burger).
java
ì½”ë“œ ë³µì‚¬
Thread.sleep(100);
System.exit(0);
í”„ë¡œê·¸ë¨ì´ 100ms ë™ì•ˆ ì‹¤í–‰ëœ í›„ ì¢…ë£Œë©ë‹ˆë‹¤.
2. Customer í´ë˜ìŠ¤
ì†ë‹˜ ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ” ì“°ë ˆë“œì…ë‹ˆë‹¤.
ìì‹ ì´ ì›í•˜ëŠ” ìŒì‹(food)ì„ Tableì—ì„œ ì œê±°í•˜ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤.
ì£¼ìš” ë©”ì„œë“œ:
run: while ë£¨í”„ ì•ˆì—ì„œ ì£¼ê¸°ì ìœ¼ë¡œ Tableì—ì„œ ìŒì‹ì„ ê°€ì ¸ì˜¤ë ¤ê³  í•©ë‹ˆë‹¤.
ì„±ê³µí•˜ë©´ "ate" ë©”ì‹œì§€ë¥¼ ì¶œë ¥.
ì‹¤íŒ¨í•˜ë©´ "failed to eat" ë©”ì‹œì§€ë¥¼ ì¶œë ¥.
eatFood: Tableì—ì„œ ìŒì‹ì„ ì œê±°í•˜ë ¤ê³  ì‹œë„. ì„±ê³µ ì‹œ true, ì‹¤íŒ¨ ì‹œ false ë°˜í™˜.
3. Cook í´ë˜ìŠ¤
ìš”ë¦¬ì‚¬ ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ” ì“°ë ˆë“œì…ë‹ˆë‹¤.
dishNames ë°°ì—´ì—ì„œ ë¬´ì‘ìœ„ë¡œ ì„ íƒëœ ìŒì‹ì„ Tableì— ì¶”ê°€í•©ë‹ˆë‹¤.
ì£¼ìš” ë©”ì„œë“œ:
run: while ë£¨í”„ ì•ˆì—ì„œ ì£¼ê¸°ì ìœ¼ë¡œ ìš”ë¦¬ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
4. Table í´ë˜ìŠ¤
ì†ë‹˜ê³¼ ìš”ë¦¬ì‚¬ê°€ ê³µìœ í•˜ëŠ” ìì›ì…ë‹ˆë‹¤.
ìŒì‹ì´ ë†“ì´ëŠ” ê³µìš© í…Œì´ë¸” ì—­í• ì„ í•©ë‹ˆë‹¤.
ì£¼ìš” ë³€ìˆ˜:
dishNames: ìš”ë¦¬ ê°€ëŠ¥í•œ ìŒì‹ ëª©ë¡.
dishes: í…Œì´ë¸”ì— í˜„ì¬ ë†“ì¸ ìŒì‹ë“¤.
MAX_FOOD: í…Œì´ë¸”ì— ë†“ì¼ ìˆ˜ ìˆëŠ” ìµœëŒ€ ìŒì‹ ê°œìˆ˜.
ì£¼ìš” ë©”ì„œë“œ:
add: ìŒì‹ ì¶”ê°€.
í…Œì´ë¸”ì— ë†“ì¸ ìŒì‹ ê°œìˆ˜ê°€ MAX_FOODë³´ë‹¤ ë§ìœ¼ë©´ ì¶”ê°€í•˜ì§€ ì•ŠìŒ.
remove: ìŒì‹ ì œê±°.
ì†ë‹˜ì´ ìš”ì²­í•œ ìŒì‹ì´ í…Œì´ë¸”ì— ìˆìœ¼ë©´ ì œê±° í›„ true ë°˜í™˜.
ì—†ìœ¼ë©´ false ë°˜í™˜.
dishNum: ê°€ëŠ¥í•œ ìŒì‹ ê°œìˆ˜ë¥¼ ë°˜í™˜.
ë™ì‘ ì›ë¦¬ ë° íë¦„
Cook(ìƒì‚°ì):

ë¬´ì‘ìœ„ë¡œ ì„ íƒëœ ìŒì‹ì„ í…Œì´ë¸”ì— ì¶”ê°€.
ìŒì‹ì´ MAX_FOOD ì´ìƒì¼ ê²½ìš° ì•„ë¬´ ê²ƒë„ ì¶”ê°€í•˜ì§€ ì•ŠìŒ.
ì¶”ê°€ëœ ìŒì‹ì€ ì½˜ì†”ì— ì¶œë ¥ë¨.
Customer(ì†Œë¹„ì):

ìì‹ ì˜ ìŒì‹ ì·¨í–¥ì— ë”°ë¼ í…Œì´ë¸”ì—ì„œ ìŒì‹ì„ ì œê±°í•˜ë ¤ê³  ì‹œë„.
ì„±ê³µí•˜ë©´ "ate a <ìŒì‹>" ë©”ì‹œì§€ ì¶œë ¥.
ì‹¤íŒ¨í•˜ë©´ "failed to eat" ë©”ì‹œì§€ ì¶œë ¥.
Table(ê³µìœ  ìì›):

ìŒì‹ì˜ ì¶”ê°€ ë° ì œê±°ë¥¼ ê´€ë¦¬.
ê²½ìŸ ìƒíƒœê°€ ë°œìƒí•  ìˆ˜ ìˆì§€ë§Œ, ë™ê¸°í™” ì²˜ë¦¬ê°€ ë˜ì–´ ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— ì—¬ëŸ¬ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆìŒ:
addì™€ remove ë©”ì„œë“œê°€ ë™ì‹œì— í˜¸ì¶œë  ê²½ìš° ë°ì´í„° ë¶ˆì¼ì¹˜ ê°€ëŠ¥.
ì˜ˆë¥¼ ë“¤ì–´, ì†ë‹˜ì´ ìŒì‹ì„ ì œê±°í•˜ë ¤ëŠ” ìˆœê°„ ìš”ë¦¬ì‚¬ê°€ ìƒˆ ìŒì‹ì„ ì¶”ê°€í•˜ê±°ë‚˜, ì—¬ëŸ¬ ì†ë‹˜ì´ ë™ì¼í•œ ìŒì‹ì„ ê°€ì ¸ê°€ë ¤ê³  ì‹œë„í•  ìˆ˜ ìˆìŒ.
ì‹¤í–‰ ì˜ˆì‹œ ì¶œë ¥
plaintext
ì½”ë“œ ë³µì‚¬
Dishes: [donut]
COOK1 ate a donut
Dishes: [donut]
Dishes: [donut, burger]
CUST2 ate a burger
Dishes: [donut]
CUST1 ate a donut
Dishes: []
CUST1 failed to eat.
...
ìš”ë¦¬ì‚¬ëŠ” ì£¼ê¸°ì ìœ¼ë¡œ ìŒì‹ì„ ì¶”ê°€.
ì†ë‹˜ë“¤ì€ í…Œì´ë¸”ì— ìŒì‹ì„ ì°¾ìœ¼ë©° ìì‹ ì˜ ìŒì‹ ì·¨í–¥ì— ë§ëŠ” ìš”ë¦¬ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì†Œë¹„í•˜ê±°ë‚˜ ì‹¤íŒ¨.
ë¬¸ì œì  ë° ê°œì„  ë°©ì•ˆ
ë™ê¸°í™” í•„ìš”

add ë° remove ë©”ì„œë“œê°€ ë™ê¸°í™”ë˜ì–´ ìˆì§€ ì•Šì•„ Race Conditionì´ ë°œìƒí•  ìˆ˜ ìˆìŒ.
ì´ë¥¼ ë°©ì§€í•˜ë ¤ë©´ synchronized í‚¤ì›Œë“œë‚˜ ReentrantLockì„ ì‚¬ìš©í•˜ì—¬ ë™ê¸°í™”ë¥¼ ì¶”ê°€í•´ì•¼ í•¨.
ì˜ˆì‹œ:

java
ì½”ë“œ ë³µì‚¬
public synchronized void add(String dish) { ... }
public synchronized boolean remove(String dishName) { ... }
ì“°ë ˆë“œ ì¢…ë£Œ ì¡°ê±´

í˜„ì¬ Cookê³¼ CustomerëŠ” ì¢…ë£Œ ì¡°ê±´ ì—†ì´ ë¬´í•œ ë£¨í”„ë¥¼ ì‹¤í–‰.
ì¼ì • ì‹œê°„ í›„ ì“°ë ˆë“œë¥¼ ì¢…ë£Œí•˜ëŠ” ë¡œì§ì„ ì¶”ê°€í•´ì•¼ íš¨ìœ¨ì .
waitì™€ notify ì‚¬ìš©

Tableì—ì„œ ìŒì‹ì´ ê°€ë“ ì°¨ë©´ ìš”ë¦¬ì‚¬ê°€ ëŒ€ê¸°(wait)í•˜ë„ë¡ ë§Œë“¤ê³ , ì†ë‹˜ì´ ìŒì‹ì„ ì œê±°í•œ í›„ notifyë¥¼ í˜¸ì¶œí•˜ì—¬ ìš”ë¦¬ì‚¬ê°€ ë‹¤ì‹œ ìŒì‹ì„ ì¶”ê°€í•  ìˆ˜ ìˆë„ë¡ ìµœì í™” ê°€ëŠ¥.
ì˜ˆì‹œ:

java
ì½”ë“œ ë³µì‚¬
public synchronized void add(String dish) {
    while (dishes.size() >= MAX_FOOD) {
        wait();
    }
    dishes.add(dish);
    notifyAll();
}

public synchronized boolean remove(String dishName) {
    while (dishes.isEmpty()) {
        wait();
    }
    ...
    notifyAll();
}





ë‚˜ì˜ ë§:
ì•¼
ChatGPTì˜ ë§:
ChatGPT
ì™œ? ë˜ ë¬´ìŠ¨ ì¼ì´ì•¼? ğŸ˜„






ë‚˜ì˜ ë§:
import java.util.ArrayList;

public class ThreadWaitEx2 {
    public static void main(String[] args) throws Exception {
        Table1 table = new Table1();

        new Thread(new Cook1(table), "COOK1").start();
        new Thread(new Customer1(table, "donut"), "CUST1").start();
        new Thread(new Customer1(table, "burger"), "CUST2").start();

        Thread.sleep(5000);
        System.exit(0);
    }
}

class Table1 {
    String[] dishNames = {"donut","donut","burger"};
    final int MAX_FOOD = 6;

    private ArrayList<String> dishes = new ArrayList<>();

    public synchronized void add(String dish){
        if(dishes.size() >= MAX_FOOD) return;

        dishes.add(dish);
        System.out.println("Dishes: "+dishes.toString());
    }

    public boolean remove(String dishName) {
        synchronized (this) {
            while(dishes.size() == 0){
                String name = Thread.currentThread().getName();
                System.out.println(name + " is waiting..");
                try {
                    Thread.sleep(500);
                    
                } catch (InterruptedException e ){
                    
                }
            }
            
            for(int i = 0; i < dishes.size(); i++){
                if(dishName.equals(dishes.get(i))){
                    dishes.remove(i);
                    return true;
                }
            }

        }

        return false;
    }

    public int dishNum() {
        return dishNames.length;
    }
}

class Cook1 implements Runnable {
    private Table1 table;

    Cook1(Table1 table) {
        this.table = table;
    }

    public void run() {
        while(true){
            int idx = (int)(Math.random() * table.dishNum());
            table.add(table.dishNames[idx]);

            try {
                Thread.sleep(1);
            } catch (InterruptedException e) {

            }
        }
    }
}

class Customer1 implements Runnable {
    private Table1 table;
    private String food;

    Customer1(Table1 table, String food ){
        this.food = food;
        this.table = table;
    }

    public void run() {
        while(true){
            try {
                Thread.sleep(10);

            } catch (InterruptedException e ){

            }

            String name = Thread.currentThread().getName();

            if(eatFood()) System.out.println(name + " ate a "+food);
            else System.out.println(name + " failed to eat. ");
        }
    }

    boolean eatFood() {
        return table.remove(food);
    }
}
í•´ì„í•´
ChatGPTì˜ ë§:
ChatGPT
ì½”ë“œ ê°œìš”
ì´ ì½”ë“œëŠ” ìƒì‚°ì-ì†Œë¹„ì ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” í”„ë¡œê·¸ë¨ì˜ ê°œì„  ë²„ì „ì…ë‹ˆë‹¤.
ì´ì „ ì½”ë“œ(ThreadWaitEx1)ì™€ ë¹„ìŠ·í•˜ì§€ë§Œ, ì“°ë ˆë“œ ê°„ ëŒ€ê¸°ë¥¼ êµ¬í˜„í•˜ì—¬ ì†ë‹˜(Customer1)ì´ í…Œì´ë¸”ì— ìŒì‹ì´ ì—†ì„ ë•Œ ê¸°ë‹¤ë¦¬ë„ë¡ ì²˜ë¦¬í–ˆìŠµë‹ˆë‹¤.

ì£¼ìš” í´ë˜ìŠ¤ ì„¤ëª…
1. ThreadWaitEx2 í´ë˜ìŠ¤
í”„ë¡œê·¸ë¨ì˜ ì§„ì…ì (main ë©”ì„œë“œ).
í…Œì´ë¸” ê°ì²´ë¥¼ ìƒì„±í•œ í›„ ë‹¤ìŒ ì“°ë ˆë“œë“¤ì„ ì‹¤í–‰í•©ë‹ˆë‹¤:
Cook1: ìš”ë¦¬ì‚¬ ì—­í• ë¡œ ìŒì‹ì„ ê³„ì† í…Œì´ë¸”ì— ì¶”ê°€.
Customer1: ë‘ ëª…ì˜ ì†ë‹˜ì´ ê°ê° "donut"ê³¼ "burger"ë¥¼ ìš”ì²­.
í”„ë¡œê·¸ë¨ì€ 5ì´ˆ ë™ì•ˆ ì‹¤í–‰ëœ í›„ ì¢…ë£Œ.
2. Table1 í´ë˜ìŠ¤
ì†ë‹˜ê³¼ ìš”ë¦¬ì‚¬ê°€ ê³µìœ í•˜ëŠ” ê³µìš© ìì›ì…ë‹ˆë‹¤.
ë³€ìˆ˜:
dishNames: ê°€ëŠ¥í•œ ìš”ë¦¬ ëª©ë¡ (ì˜ˆ: "donut", "burger").
MAX_FOOD: í…Œì´ë¸”ì— ì˜¬ë¦´ ìˆ˜ ìˆëŠ” ìµœëŒ€ ìŒì‹ ê°œìˆ˜.
dishes: í…Œì´ë¸”ì— í˜„ì¬ ë†“ì¸ ìŒì‹ ëª©ë¡.
ë©”ì„œë“œ:
add: ìš”ë¦¬ë¥¼ í…Œì´ë¸”ì— ì¶”ê°€.
synchronizedë¡œ ë™ê¸°í™”í•˜ì—¬ ì“°ë ˆë“œ ì•ˆì „ì„± ë³´ì¥.
í…Œì´ë¸”ì´ MAX_FOODë¥¼ ì´ˆê³¼í•˜ë©´ ìŒì‹ì„ ì¶”ê°€í•˜ì§€ ì•ŠìŒ.
remove: ì†ë‹˜ì´ ìš”ì²­í•œ ìŒì‹ì„ ì œê±°.
í…Œì´ë¸”ì— ìŒì‹ì´ ì—†ìœ¼ë©´ ëŒ€ê¸°(Thread.sleep(500)).
ìŒì‹ì´ ìˆìœ¼ë©´ í•´ë‹¹ ìŒì‹ ì œê±° í›„ true ë°˜í™˜.
ìš”ì²­í•œ ìŒì‹ì´ í…Œì´ë¸”ì— ì—†ìœ¼ë©´ false ë°˜í™˜.
dishNum: ìŒì‹ ì¢…ë¥˜ ê°œìˆ˜ ë°˜í™˜.
3. Cook1 í´ë˜ìŠ¤
ìš”ë¦¬ì‚¬ ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ” ì“°ë ˆë“œì…ë‹ˆë‹¤.
run ë©”ì„œë“œ:
dishNamesì—ì„œ ë¬´ì‘ìœ„ë¡œ ìŒì‹ ì„ íƒ í›„ í…Œì´ë¸”ì— ì¶”ê°€.
ì¶”ê°€ í›„ 1ms ë™ì•ˆ íœ´ì‹.
4. Customer1 í´ë˜ìŠ¤
ì†ë‹˜ ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ” ì“°ë ˆë“œì…ë‹ˆë‹¤.
ë³€ìˆ˜:
food: ìš”ì²­í•˜ëŠ” ìŒì‹ ì´ë¦„.
table: ìŒì‹ì´ ì˜¬ë ¤ì§„ í…Œì´ë¸”.
ë©”ì„œë“œ:
run: ë¬´í•œ ë£¨í”„ì—ì„œ ìŒì‹ì„ ê°€ì ¸ì˜¤ë ¤ê³  ì‹œë„.
ì„±ê³µí•˜ë©´ "ate" ë©”ì‹œì§€ ì¶œë ¥.
ì‹¤íŒ¨í•˜ë©´ "failed to eat" ë©”ì‹œì§€ ì¶œë ¥.
eatFood: í…Œì´ë¸”ì—ì„œ ìš”ì²­í•œ ìŒì‹ ì œê±° ì‹œë„.
ì„±ê³µ ì‹œ true, ì‹¤íŒ¨ ì‹œ false ë°˜í™˜.
ì£¼ìš” ë™ì‘
ìš”ë¦¬ì‚¬(Cook1)

ìŒì‹ì´ MAX_FOODë³´ë‹¤ ë§ì•„ì§€ì§€ ì•Šë„ë¡ ê´€ë¦¬í•˜ë©´ì„œ ë¬´ì‘ìœ„ë¡œ ìŒì‹ì„ ì¶”ê°€.
í…Œì´ë¸”ì— ìŒì‹ì´ ì¶”ê°€ë˜ë©´ ì½˜ì†”ì— ì¶œë ¥.
ì†ë‹˜(Customer1)

ìì‹ ì´ ìš”ì²­í•œ ìŒì‹ì´ í…Œì´ë¸”ì— ì—†ìœ¼ë©´ ëŒ€ê¸°(Thread.sleep(500)).
ìŒì‹ì´ í…Œì´ë¸”ì— ì¡´ì¬í•˜ë©´ ì œê±°í•˜ê³  ì„±ê³µ ë©”ì‹œì§€ ì¶œë ¥.
ìŒì‹ ì œê±°ì— ì‹¤íŒ¨í•˜ë©´ ì‹¤íŒ¨ ë©”ì‹œì§€ ì¶œë ¥.
ë™ê¸°í™”

add ë©”ì„œë“œëŠ” synchronizedë¡œ ì™„ì „íˆ ë™ê¸°í™”ë˜ì–´ ì“°ë ˆë“œ ê°„ ë°ì´í„° ì¶©ëŒ ë°©ì§€.
remove ë©”ì„œë“œëŠ” synchronized ë¸”ë¡ ì•ˆì—ì„œ í…Œì´ë¸”ì˜ ìŒì‹ ëª©ë¡ì— ì ‘ê·¼:
ìŒì‹ì´ ì—†ì„ ê²½ìš° ëŒ€ê¸°(while(dishes.size() == 0)).
ëŒ€ê¸° ì¤‘ ë‹¤ë¥¸ ì“°ë ˆë“œê°€ í…Œì´ë¸”ì— ìŒì‹ì„ ì¶”ê°€í•˜ë©´, ë‹¤ì‹œ ë°˜ë³µë¬¸ì„ ì‹¤í–‰.
ì‹¤í–‰ íë¦„
ìš”ë¦¬ì‚¬(Cook1)ëŠ” ë¬´ì‘ìœ„ ìŒì‹ì„ í…Œì´ë¸”ì— ì¶”ê°€.
ì†ë‹˜(Customer1)ì€ í…Œì´ë¸”ì— ìŒì‹ì„ í™•ì¸:
ìì‹ ì´ ì›í•˜ëŠ” ìŒì‹ì´ ìˆì„ ê²½ìš° ê°€ì ¸ê°€ê³  ì„±ê³µ ë©”ì‹œì§€ ì¶œë ¥.
ìŒì‹ì´ ì—†ì„ ê²½ìš° "is waiting..." ë©”ì‹œì§€ ì¶œë ¥í•˜ë©° ëŒ€ê¸°.
ìš”ë¦¬ì‚¬ê°€ ìŒì‹ì„ ì¶”ê°€í•˜ë©´ ëŒ€ê¸° ì¤‘ì´ë˜ ì†ë‹˜ì´ ë‹¤ì‹œ ì‹œë„.
ì˜ˆì‹œ ì¶œë ¥
plaintext
ì½”ë“œ ë³µì‚¬
Dishes: [donut]
CUST1 ate a donut
Dishes: [burger]
CUST2 ate a burger
Dishes: [donut, burger]
CUST1 ate a donut
Dishes: []
CUST2 is waiting..
Dishes: [donut]
CUST2 failed to eat.
...
Dishes: í…Œì´ë¸”ì— ì˜¬ë¼ì˜¨ ìŒì‹ ëª©ë¡.
ì†ë‹˜ í–‰ë™:
ìŒì‹ ì„±ê³µì ìœ¼ë¡œ ê°€ì ¸ê°€ë©´ "ate a <ìŒì‹>".
ì‹¤íŒ¨í•˜ê±°ë‚˜ ìŒì‹ì´ ì—†ìœ¼ë©´ "failed to eat" ë˜ëŠ” "is waiting...".
ë¬¸ì œì  ë° ê°œì„  ë°©ì•ˆ
ëŒ€ê¸° ì²˜ë¦¬ ê°œì„ 

í˜„ì¬ remove ë©”ì„œë“œëŠ” ìŒì‹ì´ ì—†ì„ ë•Œ Thread.sleep(500)ì„ ì‚¬ìš©í•´ ëŒ€ê¸°í•˜ì§€ë§Œ, ì´ë¥¼ **wait/notify**ë¡œ ëŒ€ì²´í•˜ë©´ ë” íš¨ìœ¨ì ì…ë‹ˆë‹¤.
waitì€ ì“°ë ˆë“œë¥¼ ëŒ€ê¸° ìƒíƒœë¡œ ì „í™˜í•˜ë©°, notifyëŠ” ëŒ€ê¸° ì¤‘ì¸ ì“°ë ˆë“œë¥¼ ê¹¨ì›ë‹ˆë‹¤.
ì¢…ë£Œ ì¡°ê±´

Cook1ê³¼ Customer1ëŠ” ë¬´í•œ ë£¨í”„ë¥¼ ì‹¤í–‰í•˜ë¯€ë¡œ ì¢…ë£Œ ì¡°ê±´ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.
ì˜ˆë¥¼ ë“¤ì–´, ì¼ì • ì‹œê°„ í›„ ì“°ë ˆë“œë¥¼ ì¢…ë£Œí•˜ê±°ë‚˜, íŠ¹ì • ì¡°ê±´(ì˜ˆ: ìŒì‹ì„ ëª¨ë‘ ì†Œë¹„)ì´ ì¶©ì¡±ë˜ë©´ ì¢…ë£Œ.
ë™ê¸°í™” ë²”ìœ„ ìµœì í™”

addì™€ remove ë©”ì„œë“œì˜ ë™ê¸°í™” ë²”ìœ„ë¥¼ í•„ìš”í•œ ë¶€ë¶„ìœ¼ë¡œ ì¤„ì—¬ ì„±ëŠ¥ ìµœì í™”.
wait/notify ì ìš© ì˜ˆì‹œ
java
ì½”ë“œ ë³µì‚¬
public synchronized void add(String dish) {
    while (dishes.size() >= MAX_FOOD) {
        try {
            wait(); // ìŒì‹ì´ ê½‰ ì°¨ë©´ ëŒ€ê¸°
        } catch (InterruptedException e) { }
    }
    dishes.add(dish);
    notifyAll(); // ìŒì‹ì´ ì¶”ê°€ë˜ì—ˆìŒì„ ì•Œë¦¼
}

public synchronized boolean remove(String dishName) {
    while (dishes.size() == 0) {
        try {
            wait(); // ìŒì‹ì´ ì—†ìœ¼ë©´ ëŒ€ê¸°
        } catch (InterruptedException e) { }
    }
    for (int i = 0; i < dishes.size(); i++) {
        if (dishName.equals(dishes.get(i))) {
            dishes.remove(i);
            notifyAll(); // ìŒì‹ì´ ì œê±°ë˜ì—ˆìŒì„ ì•Œë¦¼
            return true;
        }
    }
    return false;
}
ì´ ë°©ì‹ì€ ëŒ€ê¸° ì‹œê°„ì„ ìµœì†Œí™”í•˜ê³  ì“°ë ˆë“œì˜ íš¨ìœ¨ì„±ì„ ë†’ì…ë‹ˆë‹¤.






ë‚˜ì˜ ë§:
ì•¼
ChatGPTì˜ ë§:
ChatGPT
ì™œ? ë¬´ìŠ¨ ë¬¸ì œ ìˆì–´? ğŸ˜„






ë‚˜ì˜ ë§:
import java.util.ArrayList;
import java.util.stream.Stream;

public class ThreadWaitEx3 {
    public static void main(String[] args) throws Exception{
        Table2 table = new Table2();

        new Thread(new Cook2(table), "COOK1").start();
        new Thread(new Customer2(table, "donut"), "CUST1").start();
        new Thread(new Customer2(table, "burger"), "CUST2").start();

        Thread.sleep(5000);
        System.exit(0);
    }
}

class Table2 {
    String[] dishNames = {"donut","donut","burger"};
    final int MAX_FOOD = 6;

    private ArrayList<String> dishes = new ArrayList<>();

    public synchronized void add(String dish){

        while(dishes.size() >= MAX_FOOD){
            String name = Thread.currentThread().getName();
            System.out.println(name + " is waiting..");
            
            try {
                wait();
                Thread.sleep(500);
            } catch (InterruptedException e ){
                
            }
        }
        
        dishes.add(dish);
        notify();
        System.out.println("Dishes : "+dishes.toString());
    }

    public void remove(String dishName) {
        synchronized (this) {
            
            String name = Thread.currentThread().getName();

            while(dishes.size() == 0){
                System.out.println(name + " is waiting..");
                try {
                    wait();
                    Thread.sleep(500);

                } catch (InterruptedException e ){

                }
            }
            
            while(true){
                for(int i = 0; i < dishes.size(); i++){
                    if(dishName.equals(dishes.get(i))){
                        dishes.remove(i);
                        notify();
                        return ;
                    }
                }

                try {
                    System.out.println(name + " is waiting2...");
                    wait();
                    Thread.sleep(500);
                } catch (InterruptedException e ){

                }
            }
        }
    }

    public int dishNum() {
        return dishNames.length;
    }
}

class Cook2 implements Runnable {
    private Table2 table;

    Cook2(Table2 table) {
        this.table = table;
    }

    public void run() {
        while(true){
            int idx = (int)(Math.random() * table.dishNum());
            table.add(table.dishNames[idx]);

            try {
                Thread.sleep(10);
            } catch (InterruptedException e) {

            }
        }
    }
}

class Customer2 implements Runnable {
    private Table2 table;
    private String food;

    Customer2(Table2 table, String food ){
        this.food = food;
        this.table = table;
    }

    public void run() {
        while(true){
            try {
                Thread.sleep(10);

            } catch (InterruptedException e ){

            }

            String name = Thread.currentThread().getName();

            table.remove(food);
            System.out.println(name + " ate a "+food);
        }
    }
}
í•´ì„í•´
ChatGPTì˜ ë§:
ChatGPT
ì½”ë“œ ê°œìš”
ì´ ì½”ë“œëŠ” **ThreadWaitEx2**ì˜ ê°œì„  ë²„ì „ìœ¼ë¡œ, waitì™€ notifyë¥¼ í™œìš©í•´ ì“°ë ˆë“œ ê°„ íš¨ìœ¨ì ì¸ ëŒ€ê¸°ì™€ í†µì‹ ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
ìƒì‚°ì-ì†Œë¹„ì ë¬¸ì œë¥¼ í•´ê²°í•˜ë©°, ì†ë‹˜(Customer2)ì€ ìì‹ ì´ ì›í•˜ëŠ” ìŒì‹ì„ í…Œì´ë¸”ì—ì„œ ê°€ì ¸ê°€ê³ , ìš”ë¦¬ì‚¬(Cook2)ëŠ” í…Œì´ë¸”ì— ìŒì‹ì„ ì˜¬ë¦½ë‹ˆë‹¤.

ì£¼ìš” í´ë˜ìŠ¤ì™€ ë™ì‘
1. ThreadWaitEx3 í´ë˜ìŠ¤
í”„ë¡œê·¸ë¨ì˜ ì§„ì…ì .
Table2 ê°ì²´ë¥¼ ìƒì„±í•œ í›„ ë‹¤ìŒ ì“°ë ˆë“œë¥¼ ì‹œì‘:
Cook2: ìš”ë¦¬ì‚¬ê°€ ìŒì‹ì„ í…Œì´ë¸”ì— ì¶”ê°€.
Customer2: ë‘ ëª…ì˜ ì†ë‹˜ì´ ê°ê° "donut"ê³¼ "burger"ë¥¼ ìš”ì²­.
5ì´ˆ ë™ì•ˆ ì‹¤í–‰í•œ í›„ í”„ë¡œê·¸ë¨ ì¢…ë£Œ.
2. Table2 í´ë˜ìŠ¤
í…Œì´ë¸” ì—­í• ì„ í•˜ëŠ” í´ë˜ìŠ¤.
ì†ë‹˜ê³¼ ìš”ë¦¬ì‚¬ê°€ ê³µìœ í•˜ëŠ” ìì›ì„ ê´€ë¦¬í•˜ë©°, synchronized, wait, notifyë¥¼ í™œìš©í•´ ì“°ë ˆë“œ ê°„ ì¶©ëŒì„ ë°©ì§€í•©ë‹ˆë‹¤.

ë³€ìˆ˜:

dishNames: ì œê³µë˜ëŠ” ìŒì‹ ì¢…ë¥˜.
MAX_FOOD: í…Œì´ë¸”ì— ì˜¬ë¦´ ìˆ˜ ìˆëŠ” ìµœëŒ€ ìŒì‹ ê°œìˆ˜.
dishes: í˜„ì¬ í…Œì´ë¸”ì— ë†“ì¸ ìŒì‹ë“¤.
ë©”ì„œë“œ:

add

ìš”ë¦¬ì‚¬ê°€ ìŒì‹ì„ í…Œì´ë¸”ì— ì¶”ê°€.
ë™ì‘:
í…Œì´ë¸”ì— ìŒì‹ì´ MAX_FOOD ì´ìƒ ìˆìœ¼ë©´ ëŒ€ê¸°(wait).
ìŒì‹ ì¶”ê°€ í›„ notifyë¡œ ëŒ€ê¸° ì¤‘ì¸ ì†ë‹˜ ê¹¨ì›€.
ì½˜ì†”ì— í…Œì´ë¸” ìƒíƒœ ì¶œë ¥.
remove

ì†ë‹˜ì´ í…Œì´ë¸”ì—ì„œ ìŒì‹ì„ ê°€ì ¸ê°€ë ¤ê³  ì‹œë„.
ë™ì‘:
í…Œì´ë¸”ì´ ë¹„ì–´ ìˆìœ¼ë©´ ëŒ€ê¸°(wait).
ìš”ì²­í•œ ìŒì‹ì´ ìˆìœ¼ë©´ ì œê±° í›„ notify í˜¸ì¶œë¡œ ìš”ë¦¬ì‚¬ë¥¼ ê¹¨ì›€.
ìš”ì²­í•œ ìŒì‹ì´ ì—†ìœ¼ë©´ ë°˜ë³µì ìœ¼ë¡œ ëŒ€ê¸°(while(true) êµ¬ì¡°).
ëŒ€ê¸° ì¤‘ì¸ ì†ë‹˜ê³¼ í…Œì´ë¸” ìƒíƒœë¥¼ ì½˜ì†”ì— ì¶œë ¥.
dishNum

dishNames ë°°ì—´ì˜ ê¸¸ì´ë¥¼ ë°˜í™˜.
3. Cook2 í´ë˜ìŠ¤
ìš”ë¦¬ì‚¬ ì—­í• .
run ë©”ì„œë“œ:
ë¬´í•œ ë£¨í”„ì—ì„œ dishNamesì—ì„œ ë¬´ì‘ìœ„ ìŒì‹ì„ ê³¨ë¼ Table2.add í˜¸ì¶œ.
ìŒì‹ ì¶”ê°€ í›„ 10ms ëŒ€ê¸°.
4. Customer2 í´ë˜ìŠ¤
ì†ë‹˜ ì—­í• .
ë³€ìˆ˜:
food: ìš”ì²­í•˜ëŠ” ìŒì‹.
table: ìŒì‹ì´ ì˜¬ë ¤ì§„ í…Œì´ë¸”.
ë©”ì„œë“œ:
run:
ë¬´í•œ ë£¨í”„ì—ì„œ í…Œì´ë¸”ì—ì„œ ìŒì‹ì„ ì œê±°(Table2.remove).
ìŒì‹ ì œê±° ì„±ê³µ ì‹œ ì„±ê³µ ë©”ì‹œì§€ ì¶œë ¥.
ì£¼ìš” ì‹¤í–‰ íë¦„
ìš”ë¦¬ì‚¬(Cook2)

ìŒì‹ì´ MAX_FOODë³´ë‹¤ ë§ì•„ì§€ë©´ ëŒ€ê¸°(wait).
ìŒì‹ ì¶”ê°€ í›„ ëŒ€ê¸° ì¤‘ì¸ ì†ë‹˜ ê¹¨ì›€(notify).
ì†ë‹˜(Customer2)

ìš”ì²­í•œ ìŒì‹ì´ í…Œì´ë¸”ì— ì—†ìœ¼ë©´ ëŒ€ê¸°(wait).
ìš”ì²­í•œ ìŒì‹ì´ ìˆìœ¼ë©´ ì„±ê³µì ìœ¼ë¡œ ê°€ì ¸ê°€ê³  ìš”ë¦¬ì‚¬ë¥¼ ê¹¨ì›€(notify).
ì“°ë ˆë“œ ë™ê¸°í™”

addì™€ remove ë©”ì„œë“œì—ì„œ synchronized ë¸”ë¡ê³¼ wait, notifyë¥¼ í†µí•´ ì•ˆì „í•œ ë™ì‹œì„± êµ¬í˜„.
ì£¼ìš” ì½˜ì†” ì¶œë ¥
plaintext
ì½”ë“œ ë³µì‚¬
COOK1 is waiting..
Dishes : [donut]
CUST1 ate a donut
COOK1 is waiting..
Dishes : [burger]
CUST2 ate a burger
COOK1 is waiting..
Dishes : [donut, burger]
CUST1 ate a donut
CUST2 is waiting...
...
ìš”ë¦¬ì‚¬ í–‰ë™:
í…Œì´ë¸”ì´ ê½‰ ì°¨ë©´ "is waiting.." ë©”ì‹œì§€ ì¶œë ¥í•˜ë©° ëŒ€ê¸°.
ìŒì‹ ì¶”ê°€ í›„ "Dishes : [...]" ë©”ì‹œì§€ë¡œ í…Œì´ë¸” ìƒíƒœ ì¶œë ¥.
ì†ë‹˜ í–‰ë™:
ìŒì‹ ê°€ì ¸ê°€ê¸° ì„±ê³µ ì‹œ "ate a <ìŒì‹>".
ìŒì‹ì´ ì—†ê±°ë‚˜ ì›í•˜ëŠ” ìŒì‹ì´ ì—†ìœ¼ë©´ "is waiting..." ë©”ì‹œì§€ ì¶œë ¥.
ê°œì„ ëœ ì 
ëŒ€ê¸° ìƒíƒœ êµ¬í˜„
ThreadWaitEx2ì—ì„œì˜ ë‹¨ìˆœ Thread.sleep ëŒ€ì‹  **waitì™€ notify**ë¡œ ì“°ë ˆë“œ ëŒ€ê¸°ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì²˜ë¦¬.

ì“°ë ˆë“œ ê°„ ì‹ í˜¸ ì „ë‹¬
ìš”ë¦¬ì‚¬ê°€ ìŒì‹ì„ ì¶”ê°€í•˜ê±°ë‚˜ ì†ë‹˜ì´ ìŒì‹ì„ ê°€ì ¸ê°ˆ ë•Œë§ˆë‹¤ **notify**ë¥¼ í˜¸ì¶œí•´ ëŒ€ê¸° ì¤‘ì¸ ì“°ë ˆë“œë¥¼ ê¹¨ì›€.

ë°˜ë³µ ëŒ€ê¸° ì²˜ë¦¬
ì†ë‹˜ì´ ìš”ì²­í•œ ìŒì‹ì´ ì—†ìœ¼ë©´ ëŒ€ê¸°(wait) í›„ ë‹¤ì‹œ í…Œì´ë¸” ìƒíƒœë¥¼ í™•ì¸(while(true) êµ¬ì¡°).

ê°œì„  ê°€ëŠ¥ì„±
notify ëŒ€ì‹  notifyAll ì‚¬ìš©

í˜„ì¬ êµ¬ì¡°ì—ì„œ notifyëŠ” íŠ¹ì • ëŒ€ê¸° ì“°ë ˆë“œ í•˜ë‚˜ë§Œ ê¹¨ìš°ì§€ë§Œ, notifyAllì„ ì‚¬ìš©í•˜ë©´ ë” ì•ˆì „í•˜ê²Œ ë™ì‘ ê°€ëŠ¥.
ì˜ˆë¥¼ ë“¤ì–´, ì†ë‹˜ì´ ì—¬ëŸ¬ ëª…ì¼ ê²½ìš° ëŒ€ê¸° ì¤‘ì¸ ì†ë‹˜ë“¤ì´ ëª¨ë‘ í…Œì´ë¸” ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŒ.
ì¢…ë£Œ ì¡°ê±´ ì¶”ê°€

í˜„ì¬ í”„ë¡œê·¸ë¨ì€ ë¬´í•œ ë£¨í”„ ì‹¤í–‰. ì¢…ë£Œ ì¡°ê±´(ì˜ˆ: ì¼ì • ì‹œê°„ ì‹¤í–‰ í›„ ì¢…ë£Œ)ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì´ ë°”ëŒì§.
ì½”ë“œ ìµœì í™”

remove ë©”ì„œë“œì—ì„œ while(true) êµ¬ì¡°ëŠ” ë¹„íš¨ìœ¨ì ì¼ ìˆ˜ ìˆìŒ. ëª…í™•í•œ ì¡°ê±´ ì„¤ì • í•„ìš”.
ê°œì„ ëœ ì½”ë“œ ìŠ¤ë‹ˆí«
java
ì½”ë“œ ë³µì‚¬
public synchronized void add(String dish) {
    while (dishes.size() >= MAX_FOOD) {
        try {
            wait();
        } catch (InterruptedException e) { }
    }
    dishes.add(dish);
    System.out.println("Dishes: " + dishes.toString());
    notifyAll(); // ëª¨ë“  ëŒ€ê¸° ì¤‘ì¸ ì“°ë ˆë“œ ê¹¨ì›€
}

public synchronized void remove(String dishName) {
    while (dishes.isEmpty() || !dishes.contains(dishName)) {
        try {
            wait();
        } catch (InterruptedException e) { }
    }
    dishes.remove(dishName);
    System.out.println(Thread.currentThread().getName() + " ate a " + dishName);
    notifyAll(); // ëª¨ë“  ëŒ€ê¸° ì¤‘ì¸ ì“°ë ˆë“œ ê¹¨ì›€
}
ìœ„ì™€ ê°™ì´ notifyAllê³¼ ëª…í™•í•œ ì¡°ê±´ì„ ì„¤ì •í•˜ë©´ ì½”ë“œì˜ ì•ˆì •ì„±ê³¼ íš¨ìœ¨ì„±ì´ ë”ìš± í–¥ìƒë©ë‹ˆë‹¤.






ë‚˜ì˜ ë§:
ì•¼
ChatGPTì˜ ë§:
ChatGPT
ì™œ? ğŸ˜„ ë­ê°€ ê¶ê¸ˆí•œ ê±°ì•¼?






ë‚˜ì˜ ë§:
import java.util.ArrayList;
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.ReentrantLock;

public class ThreadWaitEx4 {
    public static void main(String[] args) throws Exception {
        Table3 table = new Table3();

        new Thread(new Cook3(table), "COOK1").start();
        new Thread(new Customer3(table, "donut"), "CUST1").start();
        new Thread(new Customer3(table, "burger"), "CUST2").start();

        Thread.sleep(5000);
        System.exit(0);
    }
}

class Table3 {
    String[] dishNames = {"donut","donut","burger"};
    final int MAX_FOOD = 6;

    private ArrayList<String> dishes = new ArrayList<>();
    
    private ReentrantLock lock = new ReentrantLock();
    private Condition forCook = lock.newCondition();
    private Condition forCust = lock.newCondition();

    public void add(String dish){
        lock.lock();
        
        try {
            while(dishes.size() >= MAX_FOOD){
                String name = Thread.currentThread().getName();
                System.out.println(name + " is waiting..");
                
                try {
                    forCook.await();
                    Thread.sleep(500);
                } catch (InterruptedException e){
                    
                }
            }
            
            dishes.add(dish);
            forCust.signal();
            System.out.println("Dishes : "+dishes.toString());
        }
        finally {
            lock.unlock();
        }
    }
    
    public void remove(String dishName) {
        lock.lock();
        String name = Thread.currentThread().getName();

        try {
            while (dishes.size() == 0) {
                System.out.println(name + " is waiting..");
                try {
                    forCust.await();
                    
                    Thread.sleep(500);

                } catch (InterruptedException e) {

                }
            }

            while (true) {
                for (int i = 0; i < dishes.size(); i++) {
                    if (dishName.equals(dishes.get(i))) {
                        dishes.remove(i);
                        forCook.signal();
                        return;
                    }
                }

                try {
                    System.out.println(name + " is waiting2...");
                    forCust.await();
                    Thread.sleep(500);
                } catch (InterruptedException e) {

                }
            }
        }
        finally {
            lock.unlock();
        }
    }

    public int dishNum() {
        return dishNames.length;
    }
}

class Cook3 implements Runnable {
    private Table3 table;

    Cook3(Table3 table) {
        this.table = table;
    }

    public void run() {
        while(true){
            int idx = (int)(Math.random() * table.dishNum());
            table.add(table.dishNames[idx]);

            try {
                Thread.sleep(10);
            } catch (InterruptedException e) {

            }
        }
    }
}

class Customer3 implements Runnable {
    private Table3 table;
    private String food;

    Customer3(Table3 table, String food ){
        this.food = food;
        this.table = table;
    }

    public void run() {
        while(true){
            try {
                Thread.sleep(10);

            } catch (InterruptedException e ){

            }

            String name = Thread.currentThread().getName();

            table.remove(food);
            System.out.println(name + " ate a "+food);
        }
    }
}

í•´ì„í•´
ChatGPTì˜ ë§:
ChatGPT
ì´ ì½”ë“œëŠ” ìŠ¤ë ˆë“œ ë™ê¸°í™”ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ReentrantLockê³¼ Conditionì„ ì‚¬ìš©í•˜ëŠ” ì˜ˆì œì…ë‹ˆë‹¤. ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ê³µìœ  ìì›ì¸ Table3ì„ ì ‘ê·¼í•˜ë©´ì„œ, cook ìŠ¤ë ˆë“œëŠ” ìŒì‹ì„ ì¶”ê°€í•˜ê³ , customer ìŠ¤ë ˆë“œëŠ” ê·¸ ìŒì‹ì„ ì†Œë¹„í•˜ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤. ì½”ë“œì—ì„œ ì‚¬ìš©í•˜ëŠ” ì£¼ìš” ê°œë…ë“¤ì„ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.

1. Table3 í´ë˜ìŠ¤
Table3 í´ë˜ìŠ¤ëŠ” ìŒì‹ì„ ì¶”ê°€í•˜ê³  ì œê±°í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ì´ í´ë˜ìŠ¤ëŠ” ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ ë™ì‹œì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ìì›ì´ê¸° ë•Œë¬¸ì—, ë™ê¸°í™”ê°€ í•„ìš”í•©ë‹ˆë‹¤. ë™ê¸°í™”ëŠ” ReentrantLockê³¼ Conditionì„ ì‚¬ìš©í•˜ì—¬ ê´€ë¦¬ë©ë‹ˆë‹¤.

ReentrantLock lock: ì´ ê°ì²´ëŠ” ìŠ¤ë ˆë“œ ê°„ì˜ ë™ê¸°í™”ë¥¼ ê´€ë¦¬í•˜ëŠ” ì ê¸ˆ ê°ì²´ì…ë‹ˆë‹¤. lock.lock()ìœ¼ë¡œ ì ê¸ˆì„ ì–»ê³ , ì‘ì—…ì´ ëë‚œ í›„ lock.unlock()ìœ¼ë¡œ ì ê¸ˆì„ í•´ì œí•©ë‹ˆë‹¤.

Condition forCook: Cook3 ìŠ¤ë ˆë“œê°€ ìŒì‹ì„ ì¶”ê°€í•  ë•Œ, í…Œì´ë¸”ì— ê³µê°„ì´ ì—†ìœ¼ë©´ ê¸°ë‹¤ë ¤ì•¼ í•©ë‹ˆë‹¤. Conditionì„ ì‚¬ìš©í•˜ì—¬ ê¸°ë‹¤ë¦¬ê²Œ í•˜ê³ , ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ì‘ì—…ì„ ì™„ë£Œí•˜ë©´ signal() ë©”ì„œë“œë¡œ ê¸°ë‹¤ë¦¬ëŠ” ìŠ¤ë ˆë“œë¥¼ ê¹¨ì›ë‹ˆë‹¤.

Condition forCust: Customer3 ìŠ¤ë ˆë“œëŠ” ìŒì‹ì„ ì†Œë¹„í•˜ë ¤ê³  í•  ë•Œ, í…Œì´ë¸”ì— ìŒì‹ì´ ì—†ìœ¼ë©´ ê¸°ë‹¤ë ¤ì•¼ í•©ë‹ˆë‹¤. Conditionì„ ì‚¬ìš©í•˜ì—¬ ê¸°ë‹¤ë¦¬ë©°, ìŒì‹ì„ ì¶”ê°€í•˜ëŠ” Cook3 ìŠ¤ë ˆë“œê°€ ìŒì‹ì„ ì¶”ê°€í•˜ë©´ signal()ë¡œ ê¸°ë‹¤ë¦¬ëŠ” Customer3 ìŠ¤ë ˆë“œë¥¼ ê¹¨ì›ë‹ˆë‹¤.

2. add(String dish) ë©”ì„œë“œ
ì´ ë©”ì„œë“œëŠ” ìŒì‹ì„ í…Œì´ë¸”ì— ì¶”ê°€í•˜ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤.

dishes.size() >= MAX_FOODì¼ ê²½ìš°, ì¦‰ í…Œì´ë¸”ì— ìŒì‹ì´ ê½‰ ì°¨ë©´, Cook3 ìŠ¤ë ˆë“œëŠ” ê¸°ë‹¤ë ¤ì•¼ í•˜ë¯€ë¡œ forCook.await()ë¥¼ í˜¸ì¶œí•˜ì—¬ ëŒ€ê¸°í•©ë‹ˆë‹¤.
ìŒì‹ì„ ì¶”ê°€í•œ í›„, forCust.signal()ì„ í˜¸ì¶œí•˜ì—¬ ëŒ€ê¸° ì¤‘ì¸ Customer3 ìŠ¤ë ˆë“œë¥¼ ê¹¨ì›Œ ìŒì‹ì„ ì†Œë¹„í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.
3. remove(String dishName) ë©”ì„œë“œ
ì´ ë©”ì„œë“œëŠ” Customer3 ìŠ¤ë ˆë“œê°€ ìŒì‹ì„ ì†Œë¹„í•˜ëŠ” ë©”ì„œë“œì…ë‹ˆë‹¤.

í…Œì´ë¸”ì— ìŒì‹ì´ ì—†ìœ¼ë©´, Customer3 ìŠ¤ë ˆë“œëŠ” ëŒ€ê¸°í•´ì•¼ í•˜ë¯€ë¡œ forCust.await()ë¥¼ í˜¸ì¶œí•˜ì—¬ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.
ìŒì‹ì´ ì¡´ì¬í•˜ë©´, í•´ë‹¹ ìŒì‹ì„ í…Œì´ë¸”ì—ì„œ ì œê±°í•˜ê³  forCook.signal()ì„ í˜¸ì¶œí•˜ì—¬ ëŒ€ê¸° ì¤‘ì¸ Cook3 ìŠ¤ë ˆë“œë¥¼ ê¹¨ì›Œ ìƒˆë¡œìš´ ìŒì‹ì„ ì¶”ê°€í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.
4. Cook3 í´ë˜ìŠ¤
Cook3 ìŠ¤ë ˆë“œëŠ” í…Œì´ë¸”ì— ìŒì‹ì„ ì¶”ê°€í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
table.add(dish) ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ëœë¤í•˜ê²Œ ìŒì‹ì„ í…Œì´ë¸”ì— ì¶”ê°€í•©ë‹ˆë‹¤.
Thread.sleep(10)ìœ¼ë¡œ ì ì‹œ ëŒ€ê¸°í•˜ë©´ì„œ, ì§€ì†ì ìœ¼ë¡œ ìŒì‹ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
5. Customer3 í´ë˜ìŠ¤
Customer3 ìŠ¤ë ˆë“œëŠ” í…Œì´ë¸”ì—ì„œ ìŒì‹ì„ ì†Œë¹„í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.
table.remove(food) ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ì§€ì •ëœ ìŒì‹ì„ í…Œì´ë¸”ì—ì„œ ì œê±°í•˜ê³ , ìŒì‹ì„ ë¨¹ì€ ë’¤ "ate a donut" ë˜ëŠ” "ate a burger"ì™€ ê°™ì€ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤.
Thread.sleep(10)ìœ¼ë¡œ ì ì‹œ ëŒ€ê¸°í•˜ë©°, ì§€ì†ì ìœ¼ë¡œ ìŒì‹ì„ ì†Œë¹„í•©ë‹ˆë‹¤.
6. main ë©”ì„œë“œ
Table3 ê°ì²´ë¥¼ ìƒì„±í•˜ê³ , Cook3ì™€ Customer3 ìŠ¤ë ˆë“œë“¤ì„ ì‹œì‘í•©ë‹ˆë‹¤.
ê° ìŠ¤ë ˆë“œëŠ” table ê°ì²´ë¥¼ ê³µìœ í•˜ë©° ë™ê¸°í™”ëœ ë°©ì‹ìœ¼ë¡œ ì‘ì—…ì„ ì§„í–‰í•©ë‹ˆë‹¤.
5ì´ˆ í›„ì— í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œí•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤ (Thread.sleep(5000)ê³¼ System.exit(0)).
ë™ê¸°í™”ì˜ íë¦„
Cook3 ìŠ¤ë ˆë“œëŠ” ìŒì‹ì„ í…Œì´ë¸”ì— ì¶”ê°€í•˜ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤. ë§Œì•½ í…Œì´ë¸”ì— ê³µê°„ì´ ì—†ë‹¤ë©´, ëŒ€ê¸°í•˜ê³  Customer3 ìŠ¤ë ˆë“œê°€ ìŒì‹ì„ ì†Œë¹„í•  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.
Customer3 ìŠ¤ë ˆë“œëŠ” ìŒì‹ì„ í…Œì´ë¸”ì—ì„œ ì†Œë¹„í•˜ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤. ë§Œì•½ í…Œì´ë¸”ì— ìŒì‹ì´ ì—†ë‹¤ë©´, ëŒ€ê¸°í•˜ê³  Cook3 ìŠ¤ë ˆë“œê°€ ìŒì‹ì„ ì¶”ê°€í•  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.
ReentrantLockê³¼ Conditionì„ ì‚¬ìš©í•˜ì—¬ ì„œë¡œ ê°„ì˜ ë™ê¸°í™”ì™€ ëŒ€ê¸°ë¥¼ ì²˜ë¦¬í•©ë‹ˆë‹¤.
ì£¼ìš” ë™ê¸°í™” ê¸°ìˆ 
lock.lock(): ìì›ì— ì ‘ê·¼í•  ë•Œ ë½ì„ ê±¸ì–´ ë‹¤ë¥¸ ìŠ¤ë ˆë“œê°€ ìì›ì— ì ‘ê·¼í•˜ì§€ ëª»í•˜ê²Œ ë§‰ìŠµë‹ˆë‹¤.
await(): í˜„ì¬ ìŠ¤ë ˆë“œë¥¼ ê¸°ë‹¤ë¦¬ê²Œ ë§Œë“­ë‹ˆë‹¤.
signal(): ëŒ€ê¸° ì¤‘ì¸ ë‹¤ë¥¸ ìŠ¤ë ˆë“œë¥¼ ê¹¨ì›ë‹ˆë‹¤.
ì´ ì½”ë“œëŠ” ìŠ¤ë ˆë“œ ê°„ì˜ ë™ê¸°í™”ë¥¼ ì²˜ë¦¬í•˜ì—¬, ìŒì‹ì„ ì¶”ê°€í•˜ëŠ” Cook3ì™€ ìŒì‹ì„ ì†Œë¹„í•˜ëŠ” Customer3ê°€ ë™ì‹œì— ì œëŒ€ë¡œ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.
